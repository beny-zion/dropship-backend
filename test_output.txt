
> amazon-dropship-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js

  console.log
    âš ï¸  ×§×•×‘×¥ ×”×‘×“×™×§×•×ª × ×•×¦×¨ ×‘×”×¦×œ×—×” - ×¦×¨×™×š ×œ×××© ××ª ×”×¤×•× ×§×¦×™×•×ª ×‘×©×œ×‘×™× ×”×‘××™×

      at tests/payment.test.js:116:9

  console.log
    âœ… ×‘×“×™×§×•×ª paymentService ××•×›× ×•×ª ×œ×¨×™×¦×”

      at tests/paymentService.test.js:267:9

  console.log
    âœ… ××©×ª× ×™ ×¡×‘×™×‘×”:

      at Object.<anonymous> (tests/payment.test.js:60:13)

  console.log
       - HYP_MASOF: 0010341822

      at Object.<anonymous> (tests/payment.test.js:61:13)

  console.log
    ğŸ”µ Hyp Pay Request: {
      action: 'soft',
      amount: 299,
      order: 'TEST-1766532411619',
      postpone: 'True'
    }

      at sendRequest (src/utils/hypPayClient.js:48:13)

  console.log
       - HYP_TEST_MODE: true

      at Object.<anonymous> (tests/payment.test.js:62:13)

  console.log
    âœ… ×‘×“×™×§×•×ª shippingCalculator ××•×›× ×•×ª ×œ×¨×™×¦×”

      at tests/shippingCalculator.test.js:192:9

  console.log
    ğŸŸ¢ Hyp Pay Response: { CCode: '6', success: false, Id: '0' }

      at sendRequest (src/utils/hypPayClient.js:76:15)

  console.log
    âœ… ×—×™×‘×•×¨ ×œ-Hyp Pay API ×¢×•×‘×“

      at Object.<anonymous> (tests/payment.test.js:105:15)

  console.error
    [PaymentService] holdCredit error: Error: Hyp Pay credentials not configured. Check HYP_MASOF and HYP_PASSP in .env
        at sendRequest (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\src\utils\hypPayClient.js:34:11)
        at holdCredit (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\src\services\paymentService.js:108:26)
        at Object.<anonymous> (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\tests\paymentService.test.js:115:5)
        at Promise.finally.completed (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
        at _callCircusTest (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
        at C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
        at run (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
        at jestAdapter (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-circus\build\runner.js:101:19)
        at runTestInternal (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-runner\build\testWorker.js:275:16)
        at runTest (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-runner\build\testWorker.js:343:7)
        at Object.worker (C:\Users\1\Desktop\×××–×•×Ÿ\amazon-dropship\backend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 128 |[39m     }[33m;[39m
     [90m 129 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 130 |[39m     console[33m.[39merror([32m'[PaymentService] holdCredit error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 131 |[39m     [36mreturn[39m {
     [90m 132 |[39m       success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 133 |[39m       error[33m:[39m [32m'×ª×§×œ×” ×‘×ª×§×©×•×¨×ª ×¢× ×©×¢×¨ ×”×ª×©×œ×•×'[39m[33m,[39m[0m

      at holdCredit (src/services/paymentService.js:130:13)

  console.log
    
    âœ… ×‘×“×™×§×ª ×ª×–×¨×™× ×”×–×× ×” ××œ× ××•×›× ×” ×œ×¨×™×¦×”!

      at tests/fullOrderFlow.test.js:384:9

  console.log
    ×”×¨×¥: npm test -- fullOrderFlow.test.js

      at tests/fullOrderFlow.test.js:385:9

  console.log
    [DistributedLock] Instance ID: 64360-1766532412889

      at src/utils/distributedLock.js:31:9

  console.log
    âœ… ×‘×“×™×§×•×ª Phase 3: Auto Charging Logic ××•×›× ×•×ª ×œ×¨×™×¦×”

      at tests/autoCharging.test.js:279:9

  console.log
    âœ… Test setup complete - Order: TEST-CANCEL-1766532416170

      at Object.<anonymous> (tests/customerCancellation.test.js:85:13)

  console.log
    âŒ Cache MISS: settings:system

      at cacheGet (src/utils/cache.js:45:13)

  console.log
    [Order TEST-AUTO-1766532417113] âœ… ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×” (fallback hook)

      at model.<anonymous> (src/models/Order.js:515:13)

  console.log
    Payment status: pending

      at Object.<anonymous> (tests/customerCancellation.test.js:224:15)

  console.log
    
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:38:13)

  console.log
    ğŸ›’ ×œ×§×•×— ×™×•×¦×¨ ×”×–×× ×” ×—×“×©×”

      at Object.<anonymous> (tests/fullOrderFlow.test.js:39:13)

  console.log
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:40:13)

  console.log
    [Order TEST-AUTO-1766532418208] âœ… ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×” (fallback hook)

      at model.<anonymous> (src/models/Order.js:515:13)

  console.log
    
    ğŸ“¦ ×¤×¨×˜×™ ×”×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:90:13)

  console.log
       ××¡×¤×¨ ×”×–×× ×”: DEMO-1766532418227

      at Object.<anonymous> (tests/fullOrderFlow.test.js:91:13)

  console.log
       ×œ×§×•×—: ×™×©×¨××œ ×™×©×¨××œ×™

      at Object.<anonymous> (tests/fullOrderFlow.test.js:92:13)

  console.log
       ×˜×œ×¤×•×Ÿ: 050-1234567

      at Object.<anonymous> (tests/fullOrderFlow.test.js:93:13)

  console.log
       ×›×ª×•×‘×ª: ×¨×—×•×‘ ×”×¨×¦×œ 10, ×ª×œ ××‘×™×‘

      at Object.<anonymous> (tests/fullOrderFlow.test.js:94:13)

  console.log
    
    ğŸ›ï¸  ×¤×¨×™×˜×™× ×‘×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:96:13)

  console.log
       1. × ×¢×œ×™ ×¡×¤×•×¨×˜ Nike Air Max

      at tests/fullOrderFlow.test.js:98:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××—×™×¨: â‚ª450

      at tests/fullOrderFlow.test.js:99:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×›××•×ª: 1

      at tests/fullOrderFlow.test.js:100:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×¤×§: Amazon

      at tests/fullOrderFlow.test.js:101:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: pending

      at tests/fullOrderFlow.test.js:102:15
          at Proxy.forEach (<anonymous>)

  console.log
       2. ×—×•×œ×¦×ª ×¤×•×œ×• Ralph Lauren

      at tests/fullOrderFlow.test.js:98:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××—×™×¨: â‚ª250

      at tests/fullOrderFlow.test.js:99:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×›××•×ª: 1

      at tests/fullOrderFlow.test.js:100:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×¤×§: Amazon

      at tests/fullOrderFlow.test.js:101:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: pending

      at tests/fullOrderFlow.test.js:102:15
          at Proxy.forEach (<anonymous>)

  console.log
    
    ğŸ’° ×¤×™×¨×•×˜ ××—×™×¨×™×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:105:13)

  console.log
       ×¡×›×•× ×‘×™× ×™×™×: â‚ª700

      at Object.<anonymous> (tests/fullOrderFlow.test.js:106:13)

  console.log
       ××©×œ×•×—: â‚ª49

      at Object.<anonymous> (tests/fullOrderFlow.test.js:107:13)

  console.log
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:108:13)

  console.log
       ×¡×”"×› ×œ×ª×©×œ×•×: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:109:13)

  console.log
    
    ğŸ’³ ×¡×˜×˜×•×¡ ×ª×©×œ×•×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:111:13)

  console.log
       ×¡×˜×˜×•×¡: pending

      at Object.<anonymous> (tests/fullOrderFlow.test.js:112:13)

  console.log
       ×©×™×˜×ª ×ª×©×œ×•×: credit_card

      at Object.<anonymous> (tests/fullOrderFlow.test.js:113:13)

  console.log
    
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:121:13)

  console.log
    ğŸ’³ ×ª×¤×™×¡×ª ××¡×’×¨×ª ××©×¨××™ - ×œ× ×’×•×‘×™× ×¢×“×™×™×Ÿ!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:122:13)

  console.log
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:123:13)

  console.log
    
    ğŸ” ×‘×“×™×§×ª ××©×ª× ×™ ×¡×‘×™×‘×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:126:13)

  console.log
       HYP_MASOF: 0010341822

      at Object.<anonymous> (tests/fullOrderFlow.test.js:127:13)

  console.log
       HYP_PASSP: hyp1234

      at Object.<anonymous> (tests/fullOrderFlow.test.js:128:13)

  console.log
       HYP_TEST_MODE: true

      at Object.<anonymous> (tests/fullOrderFlow.test.js:129:13)

  console.log
       HYP_API_URL: https://pay.hyp.co.il/p/

      at Object.<anonymous> (tests/fullOrderFlow.test.js:130:13)

  console.log
    
    ğŸ’³ ×¤×¨×˜×™ ×ª×©×œ×•×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:141:13)

  console.log
       ×›×¨×˜×™×¡: **** **** **** 5614

      at Object.<anonymous> (tests/fullOrderFlow.test.js:142:13)

  console.log
       ×ª×•×§×£: 12/25

      at Object.<anonymous> (tests/fullOrderFlow.test.js:143:13)

  console.log
       ×¡×›×•× ×œ× ×¢×™×œ×”: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:144:13)

  console.log
    
    â³ ×©×•×œ×— ×‘×§×©×” ×œ-Hyp Pay...

      at Object.<anonymous> (tests/fullOrderFlow.test.js:146:13)

  console.log
    ğŸ”µ Hyp Pay Request: {
      action: 'soft',
      amount: 749,
      order: 'DEMO-1766532418227',
      postpone: 'True'
    }

      at sendRequest (src/utils/hypPayClient.js:48:13)

  console.log
    ğŸ’¾ Cache SET: settings:system (TTL: 600s)

      at cacheSet (src/utils/cache.js:52:11)

  console.log
    [Order TEST-AUTO-1766532419256] âœ… ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×” (fallback hook)

      at model.<anonymous> (src/models/Order.js:515:13)

  console.log
    ğŸŸ¢ Hyp Pay Response: { CCode: '800', success: true, Id: '370675174' }

      at sendRequest (src/utils/hypPayClient.js:76:15)

  console.log
    
    ğŸ“¥ ×ª×©×•×‘×” ×-Hyp Pay:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:151:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:152:13)

  console.log
    Raw Response: {
      "success": true,
      "transactionId": "370675174",
      "amount": 749,
      "message": "××¡×’×¨×ª ××©×¨××™ × ×ª×¤×¡×” ×‘×”×¦×œ×—×”",
      "status": "hold",
      "raw": {
        "Id": "370675174",
        "CCode": "800",
        "Amount": "749",
        "ACode": "0990220",
        "Fild1": "",
        "Fild2": "",
        "Fild3": "\n"
      }
    }

      at Object.<anonymous> (tests/fullOrderFlow.test.js:153:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:154:13)

  console.log
    âœ… ×¡×˜×˜×•×¡: ×”×¦×œ×—×”!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:156:15)

  console.log
       ××–×”×” ×¢×¡×§×”: 370675174

      at Object.<anonymous> (tests/fullOrderFlow.test.js:157:15)

  console.log
       ×¡×›×•× ×©× × ×¢×œ: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:158:15)

  console.log
       ×”×•×“×¢×”: ××¡×’×¨×ª ××©×¨××™ × ×ª×¤×¡×” ×‘×”×¦×œ×—×”

      at Object.<anonymous> (tests/fullOrderFlow.test.js:159:15)

  console.log
    
    ğŸ’¾ ×”×”×–×× ×” ×¢×•×“×›× ×” ×‘××¢×¨×›×ª:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:176:15)

  console.log
       payment.status: hold

      at Object.<anonymous> (tests/fullOrderFlow.test.js:177:15)

  console.log
       payment.hypTransactionId: 370675174

      at Object.<anonymous> (tests/fullOrderFlow.test.js:178:15)

  console.log
       payment.holdAmount: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:179:15)

  console.log
       payment.holdAt: 24.12.2025, 1:27:00

      at Object.<anonymous> (tests/fullOrderFlow.test.js:180:15)

  console.log
    
    ğŸ“ ×”×™×¡×˜×•×¨×™×™×ª ×ª×©×œ×•××™×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:182:15)

  console.log
       1. hold - â‚ª749 - âœ…

      at tests/fullOrderFlow.test.js:184:17
          at Proxy.forEach (<anonymous>)

  console.log
          ××–×”×”: 370675174

      at tests/fullOrderFlow.test.js:185:17
          at Proxy.forEach (<anonymous>)

  console.log
          ×–××Ÿ: 24.12.2025, 1:27:00

      at tests/fullOrderFlow.test.js:186:17
          at Proxy.forEach (<anonymous>)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:194:13)

  console.log
    
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:202:13)

  console.log
    ğŸ‘¨â€ğŸ’¼ ×× ×”×œ ××–××™×Ÿ ×¤×¨×™×˜×™× ×-Amazon

      at Object.<anonymous> (tests/fullOrderFlow.test.js:203:13)

  console.log
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:204:13)

  console.log
    
    ğŸ“‹ ×œ×¤× ×™ ×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:209:13)

  console.log
       1. × ×¢×œ×™ ×¡×¤×•×¨×˜ Nike Air Max

      at tests/fullOrderFlow.test.js:211:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: pending

      at tests/fullOrderFlow.test.js:212:15
          at Proxy.forEach (<anonymous>)

  console.log
       2. ×—×•×œ×¦×ª ×¤×•×œ×• Ralph Lauren

      at tests/fullOrderFlow.test.js:211:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: pending

      at tests/fullOrderFlow.test.js:212:15
          at Proxy.forEach (<anonymous>)

  console.log
    
    â³ ××–××™×Ÿ ×¤×¨×™×˜ 1...

      at Object.<anonymous> (tests/fullOrderFlow.test.js:216:13)

  console.log
    âœ… ×¤×¨×™×˜ 1 ×”×•×–××Ÿ!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:226:13)

  console.log
    â³ ××–××™×Ÿ ×¤×¨×™×˜ 2...

      at Object.<anonymous> (tests/fullOrderFlow.test.js:229:13)

  console.log
    [Order DEMO-1766532418227] âœ… ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×” (fallback hook)

      at model.<anonymous> (src/models/Order.js:515:13)

  console.log
    âœ… ×¤×¨×™×˜ 2 ×”×•×–××Ÿ!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:240:13)

  console.log
    
    ğŸ“‹ ××—×¨×™ ×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:245:13)

  console.log
       1. × ×¢×œ×™ ×¡×¤×•×¨×˜ Nike Air Max

      at tests/fullOrderFlow.test.js:247:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: ordered

      at tests/fullOrderFlow.test.js:248:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××¡×¤×¨ ×”×–×× ×ª ×¡×¤×§: AMZ-112-123456

      at tests/fullOrderFlow.test.js:250:17
          at Proxy.forEach (<anonymous>)

  console.log
          ×”×•×–××Ÿ ×‘: 24.12.2025, 1:27:00

      at tests/fullOrderFlow.test.js:251:17
          at Proxy.forEach (<anonymous>)

  console.log
       2. ×—×•×œ×¦×ª ×¤×•×œ×• Ralph Lauren

      at tests/fullOrderFlow.test.js:247:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: ordered

      at tests/fullOrderFlow.test.js:248:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××¡×¤×¨ ×”×–×× ×ª ×¡×¤×§: AMZ-112-123457

      at tests/fullOrderFlow.test.js:250:17
          at Proxy.forEach (<anonymous>)

  console.log
          ×”×•×–××Ÿ ×‘: 24.12.2025, 1:27:01

      at tests/fullOrderFlow.test.js:251:17
          at Proxy.forEach (<anonymous>)

  console.log
    
    ğŸ¤– Pre-Save Hook ×¤×¢×œ ××•×˜×•××˜×™×ª!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:255:13)

  console.log
       payment.status ×”×©×ª× ×” ×œ: ready_to_charge

      at Object.<anonymous> (tests/fullOrderFlow.test.js:256:13)

  console.log
       âœ… ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ×”×”×–×× ×” ××•×›× ×” ×œ×’×‘×™×”!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:259:15)

  console.log
    
    ğŸ“ ×˜×™×™××œ×™×™×Ÿ ×©×œ ×”×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:262:13)

  console.log
       1. [pending] ×”×”×–×× ×” ×”×ª×§×‘×œ×”

      at tests/fullOrderFlow.test.js:264:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:26:58

      at tests/fullOrderFlow.test.js:265:15
          at Proxy.forEach (<anonymous>)

  console.log
       2. [in_progress] ğŸ¤– ×¢×“×›×•×Ÿ ××•×˜×•××˜×™: 1 ××ª×•×š 2 ×¤×¨×™×˜×™× ×‘×ª×”×œ×™×š ×”×–×× ×” ××• ××©×œ×•×—

      at tests/fullOrderFlow.test.js:264:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:27:00

      at tests/fullOrderFlow.test.js:265:15
          at Proxy.forEach (<anonymous>)

  console.log
       3. [ready_to_charge] ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×”

      at tests/fullOrderFlow.test.js:264:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:27:01

      at tests/fullOrderFlow.test.js:265:15
          at Proxy.forEach (<anonymous>)

  console.log
    
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:274:13)

  console.log
    ğŸ’° Job ×¨×¥ ×•×’×•×‘×” ××ª ×”×ª×©×œ×•×

      at Object.<anonymous> (tests/fullOrderFlow.test.js:275:13)

  console.log
    ======================================================================

      at Object.<anonymous> (tests/fullOrderFlow.test.js:276:13)

  console.log
    
    ğŸ“Š ××¦×‘ ×œ×¤× ×™ ×’×‘×™×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:281:13)

  console.log
       payment.status: ready_to_charge

      at Object.<anonymous> (tests/fullOrderFlow.test.js:282:13)

  console.log
       payment.holdAmount: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:283:13)

  console.log
       payment.chargedAmount: â‚ª0

      at Object.<anonymous> (tests/fullOrderFlow.test.js:284:13)

  console.log
    
    â³ ××‘×¦×¢ ×’×‘×™×” ×“×¨×š Hyp Pay...

      at Object.<anonymous> (tests/fullOrderFlow.test.js:286:13)

  console.log
    
    ğŸ’µ ×—×™×©×•×‘ ×¡×›×•× ×¡×•×¤×™:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:293:13)

  console.log
       1. × ×¢×œ×™ ×¡×¤×•×¨×˜ Nike Air Max: â‚ª450 x 1 = â‚ª450

      at tests/fullOrderFlow.test.js:295:15
          at Array.forEach (<anonymous>)

  console.log
       2. ×—×•×œ×¦×ª ×¤×•×œ×• Ralph Lauren: â‚ª250 x 1 = â‚ª250

      at tests/fullOrderFlow.test.js:295:15
          at Array.forEach (<anonymous>)

  console.log
       ××©×œ×•×—: â‚ª49

      at Object.<anonymous> (tests/fullOrderFlow.test.js:297:13)

  console.log
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:298:13)

  console.log
       ×¡×”"×› ×œ×’×‘×™×”: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:299:13)

  console.log
    ğŸ”µ Hyp Pay Request: {
      action: 'commitTrans',
      amount: 749,
      order: undefined,
      postpone: undefined
    }

      at sendRequest (src/utils/hypPayClient.js:48:13)

  console.log
    [ChargeJob] ğŸ” ××—×¤×© ×”×–×× ×•×ª ××•×›× ×•×ª ×œ×’×‘×™×”...

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:173:11)

  console.log
    ğŸŸ¢ Hyp Pay Response: { CCode: '0', success: true, Id: '370675174' }

      at sendRequest (src/utils/hypPayClient.js:76:15)

  console.log
    
    ğŸ“¥ ×ª×©×•×‘×” ×-Hyp Pay:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:304:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:305:13)

  console.log
    âœ… ×¡×˜×˜×•×¡: ×”×¦×œ×—×”!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:307:15)

  console.log
       ×¡×›×•× ×©× ×’×‘×”: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:308:15)

  console.log
       ××–×”×” ×¢×¡×§×”: 370675174

      at Object.<anonymous> (tests/fullOrderFlow.test.js:309:15)

  console.log
       ×”×•×“×¢×”: × ×’×‘×• â‚ª749 ×‘×”×¦×œ×—×”

      at Object.<anonymous> (tests/fullOrderFlow.test.js:310:15)

  console.log
    [ChargeJob] ğŸ“‹ × ××¦××• 1 ×”×–×× ×•×ª ××•×›× ×•×ª ×œ×’×‘×™×”

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:195:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:338:13)

  console.log
    [DistributedLock] âœ… Acquired lock: charge_order_694b2542dea93d5058eb404f (expires in 60s)

      at acquireLock (src/utils/distributedLock.js:55:13)

  console.log
    [ChargeJob] ğŸ”’ Acquired lock for order DEMO-1766532418227

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:221:17)

  console.log
    [ChargeJob] ğŸ”„ ×× ×¡×” ×œ×’×‘×•×ª ×”×–×× ×” DEMO-1766532418227...

      at chargeOrder (src/jobs/chargeReadyOrders.js:24:13)

  console.log
    ğŸ”µ Hyp Pay Request: {
      action: 'commitTrans',
      amount: 749,
      order: undefined,
      postpone: undefined
    }

      at sendRequest (src/utils/hypPayClient.js:48:13)

  console.log
    
    ğŸ’¾ ×”××¦×‘ ×”×¡×•×¤×™ ×©×œ ×”×”×–×× ×”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:343:13)

  console.log
       ××¡×¤×¨ ×”×–×× ×”: DEMO-1766532418227

      at Object.<anonymous> (tests/fullOrderFlow.test.js:344:13)

  console.log
       payment.status: charged

      at Object.<anonymous> (tests/fullOrderFlow.test.js:345:13)

  console.log
       payment.holdAmount: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:346:13)

  console.log
       payment.chargedAmount: â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:347:13)

  console.log
       payment.holdAt: 24.12.2025, 1:27:00

      at Object.<anonymous> (tests/fullOrderFlow.test.js:348:13)

  console.log
       payment.chargedAt: 24.12.2025, 1:27:03

      at Object.<anonymous> (tests/fullOrderFlow.test.js:349:13)

  console.log
    
    ğŸ“ ×”×™×¡×˜×•×¨×™×™×ª ×ª×©×œ×•××™× ××œ××”:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:351:13)

  console.log
       1. [hold] â‚ª749

      at tests/fullOrderFlow.test.js:353:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××–×”×”: 370675174

      at tests/fullOrderFlow.test.js:354:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: âœ… ×”×¦×œ×—×”

      at tests/fullOrderFlow.test.js:355:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×–××Ÿ: 24.12.2025, 1:27:00

      at tests/fullOrderFlow.test.js:356:15
          at Proxy.forEach (<anonymous>)

  console.log
       2. [charge] â‚ª749

      at tests/fullOrderFlow.test.js:353:15
          at Proxy.forEach (<anonymous>)

  console.log
          ××–×”×”: 370675174

      at tests/fullOrderFlow.test.js:354:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×¡×˜×˜×•×¡: âœ… ×”×¦×œ×—×”

      at tests/fullOrderFlow.test.js:355:15
          at Proxy.forEach (<anonymous>)

  console.log
          ×–××Ÿ: 24.12.2025, 1:27:03

      at tests/fullOrderFlow.test.js:356:15
          at Proxy.forEach (<anonymous>)

  console.log
    
    ğŸ“ ×˜×™×™××œ×™×™×Ÿ ××œ×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:362:13)

  console.log
       1. [pending] ×”×”×–×× ×” ×”×ª×§×‘×œ×”

      at tests/fullOrderFlow.test.js:364:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:26:58

      at tests/fullOrderFlow.test.js:365:15
          at Proxy.forEach (<anonymous>)

  console.log
       2. [in_progress] ğŸ¤– ×¢×“×›×•×Ÿ ××•×˜×•××˜×™: 1 ××ª×•×š 2 ×¤×¨×™×˜×™× ×‘×ª×”×œ×™×š ×”×–×× ×” ××• ××©×œ×•×—

      at tests/fullOrderFlow.test.js:364:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:27:00

      at tests/fullOrderFlow.test.js:365:15
          at Proxy.forEach (<anonymous>)

  console.log
       3. [ready_to_charge] ×›×œ ×”×¤×¨×™×˜×™× ×”×•×›×¨×¢×• - ××•×›×Ÿ ×œ×’×‘×™×”

      at tests/fullOrderFlow.test.js:364:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:27:01

      at tests/fullOrderFlow.test.js:365:15
          at Proxy.forEach (<anonymous>)

  console.log
       4. [charged] ×ª×©×œ×•× × ×’×‘×”: â‚ª749

      at tests/fullOrderFlow.test.js:364:15
          at Proxy.forEach (<anonymous>)

  console.log
          24.12.2025, 1:27:03

      at tests/fullOrderFlow.test.js:365:15
          at Proxy.forEach (<anonymous>)

  console.log
    
    ğŸ‰ ×”×”×–×× ×” ×”×•×©×œ××” ×‘×”×¦×œ×—×”!

      at Object.<anonymous> (tests/fullOrderFlow.test.js:368:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:369:13)

  console.log
    ×¡×™×›×•×:

      at Object.<anonymous> (tests/fullOrderFlow.test.js:370:13)

  console.log
    âœ… ×œ×§×•×— ×”×–××™×Ÿ 2 ×¤×¨×™×˜×™× ×‘×¡×š â‚ª700

      at Object.<anonymous> (tests/fullOrderFlow.test.js:371:13)

  console.log
    âœ… × ×¢×œ×” ××¡×’×¨×ª ××©×¨××™ ×©×œ â‚ª749

      at Object.<anonymous> (tests/fullOrderFlow.test.js:372:13)

  console.log
    âœ… ×× ×”×œ ×”×–××™×Ÿ ××ª ×”×¤×¨×™×˜×™× ××”×¡×¤×§

      at Object.<anonymous> (tests/fullOrderFlow.test.js:373:13)

  console.log
    âœ… ×”××¢×¨×›×ª ×–×™×”×ª×” ××•×˜×•××˜×™×ª ×©××•×›×Ÿ ×œ×’×‘×™×”

      at Object.<anonymous> (tests/fullOrderFlow.test.js:374:13)

  console.log
    âœ… × ×’×‘×• â‚ª749 (×›×•×œ×œ ××©×œ×•×—)

      at Object.<anonymous> (tests/fullOrderFlow.test.js:375:13)

  console.log
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      at Object.<anonymous> (tests/fullOrderFlow.test.js:376:13)

  console.log
    ğŸŸ¢ Hyp Pay Response: { CCode: '250', success: true, Id: '370675174' }

      at sendRequest (src/utils/hypPayClient.js:76:15)

  console.log
    [ChargeJob] âœ… ×”×–×× ×” DEMO-1766532418227 × ×’×‘×ª×” ×‘×”×¦×œ×—×”: â‚ª749

      at chargeOrder (src/jobs/chargeReadyOrders.js:44:15)

  console.log
    [DistributedLock] ğŸ”“ Released lock: charge_order_694b2542dea93d5058eb404f

      at releaseLock (src/utils/distributedLock.js:85:15)

  console.log
    [ChargeJob] ğŸ”“ Released lock for order DEMO-1766532418227

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:241:17)

  console.log
    [ChargeJob] âœ… ×¡×™×›×•× ×¨×™×¦×”: { processed: 1, success: 1, cancelled: 0, failed: 0, skipped: 0 }

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:248:13)

  console.log
    [ChargeJob] ğŸ” ××—×¤×© ×”×–×× ×•×ª ××•×›× ×•×ª ×œ×’×‘×™×”...

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:173:11)

  console.log
    [ChargeJob] ğŸ“‹ × ××¦××• 1 ×”×–×× ×•×ª ××•×›× ×•×ª ×œ×’×‘×™×”

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:195:13)

  console.log
    [DistributedLock] âœ… Acquired lock: charge_order_694b254b25871e37e067da0d (expires in 60s)

      at acquireLock (src/utils/distributedLock.js:55:13)

  console.log
    [ChargeJob] ğŸ”’ Acquired lock for order TEST-JOB-1766532427011

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:221:17)

  console.log
    [ChargeJob] ğŸ”„ ×× ×¡×” ×œ×’×‘×•×ª ×”×–×× ×” TEST-JOB-1766532427011...

      at chargeOrder (src/jobs/chargeReadyOrders.js:24:13)

  console.log
    ğŸ”µ Hyp Pay Request: {
      action: 'commitTrans',
      amount: 149,
      order: undefined,
      postpone: undefined
    }

      at sendRequest (src/utils/hypPayClient.js:48:13)

  console.log
    ğŸŸ¢ Hyp Pay Response: { CCode: '250', success: true, Id: 'TEST-TRANS-1766532427011' }

      at sendRequest (src/utils/hypPayClient.js:76:15)

  console.log
    [ChargeJob] âœ… ×”×–×× ×” TEST-JOB-1766532427011 × ×’×‘×ª×” ×‘×”×¦×œ×—×”: â‚ª149

      at chargeOrder (src/jobs/chargeReadyOrders.js:44:15)

  console.log
    [DistributedLock] ğŸ”“ Released lock: charge_order_694b254b25871e37e067da0d

      at releaseLock (src/utils/distributedLock.js:85:15)

  console.log
    [ChargeJob] ğŸ”“ Released lock for order TEST-JOB-1766532427011

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:241:17)

  console.log
    [ChargeJob] âœ… ×¡×™×›×•× ×¨×™×¦×”: { processed: 1, success: 1, cancelled: 0, failed: 0, skipped: 0 }

      at chargeReadyOrders (src/jobs/chargeReadyOrders.js:248:13)

